<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.renrenlab.rlab.dao.BgHomeDao">

    <resultMap id="BaseResultMap" type="com.renrenlab.rlab.vo.BgHomeInfo">
        <result column="count" jdbcType="BIGINT" property="count"/>
        <result column="time" jdbcType="TIMESTAMP" property="time"/>
        <result column="before" jdbcType="VARCHAR" property="before"/>
    </resultMap>


    <select id="selectUserCountsByDate" resultType="com.renrenlab.rlab.vo.BgHomeInfo">
        SELECT
        count(*), date_trunc('day', create_time) AS time,age(date_trunc('day', create_time)) as BEFORE
        FROM
        rlab_user_info.t_user_base_info
        WHERE create_time BETWEEN (CURRENT_DATE - 7) AND CURRENT_DATE and u_state!=2
        GROUP BY date_trunc('day', create_time)

    </select>

    <select id="selectOrgCountsByDate" resultType="com.renrenlab.rlab.vo.BgHomeInfo">
        SELECT
	    count(*), date_trunc('day', create_time) AS time,age(date_trunc('day', create_time)) as BEFORE
        FROM
        rlab_org_info.t_org_base_info
        WHERE create_time BETWEEN (CURRENT_DATE - 7) AND CURRENT_DATE
        GROUP BY date_trunc('day', create_time)
    </select>

    <select id="selectInsCountsByDate" resultType="com.renrenlab.rlab.vo.BgHomeInfo">
        SELECT
	    count(*), date_trunc('day', create_time) AS time,age(date_trunc('day', create_time)) as BEFORE
        FROM
        rlab_instrument_info.t_instrument_org_map
        WHERE create_time BETWEEN (CURRENT_DATE - 7) AND CURRENT_DATE
        GROUP BY date_trunc('day', create_time)
    </select>

    <select id="selectInsCounts" resultType="java.lang.Integer">
        SELECT
        count(*)
        FROM
        rlab_instrument_info.t_instrument_org_map
    </select>

    <select id="selectUserCounts" resultType="java.lang.Integer">
        SELECT
        count(*)
        FROM
        rlab_user_info.t_user_base_info
        where u_state !=2
    </select>

    <select id="selectOrgCounts" resultType="java.lang.Integer">
        SELECT
	    count(*)
        FROM
        rlab_org_info.t_org_base_info
    </select>
</mapper>